<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tone Synth - Advanced Web Synthesizer</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">Tone Synth</h1>
            <div class="header-controls">
                <canvas id="waveform" class="waveform-display"></canvas>
                <div class="voice-counter">
                    <span>Voices:</span>
                    <span id="voice-count">0</span>
                    <span>/8</span>
                </div>
            </div>
        </header>

        <div class="controls-grid">
            <!-- Oscillator Section -->
            <section class="control-section oscillator-section">
                <h2 class="section-title">Oscillator</h2>
                <div class="waveform-selector">
                    <button class="waveform-button" data-waveform="sine" title="Sine Wave">
                        <svg viewBox="0 0 40 20">
                            <path d="M0,10 Q10,0 20,10 T40,10" stroke="currentColor" fill="none" stroke-width="2"/>
                        </svg>
                    </button>
                    <button class="waveform-button" data-waveform="square" title="Square Wave">
                        <svg viewBox="0 0 40 20">
                            <path d="M0,15 L0,5 L10,5 L10,15 L20,15 L20,5 L30,5 L30,15 L40,15" stroke="currentColor" fill="none" stroke-width="2"/>
                        </svg>
                    </button>
                    <button class="waveform-button active" data-waveform="sawtooth" title="Sawtooth Wave">
                        <svg viewBox="0 0 40 20">
                            <path d="M0,15 L10,5 L10,15 L20,5 L20,15 L30,5 L30,15 L40,5" stroke="currentColor" fill="none" stroke-width="2"/>
                        </svg>
                    </button>
                    <button class="waveform-button" data-waveform="triangle" title="Triangle Wave">
                        <svg viewBox="0 0 40 20">
                            <path d="M0,15 L10,5 L20,15 L30,5 L40,15" stroke="currentColor" fill="none" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
            </section>

            <!-- Envelope Section -->
            <section class="control-section envelope-section">
                <h2 class="section-title">Envelope</h2>
                <div class="control-group">
                    <label class="control-label">
                        Attack <span class="value-display" id="attack-value">0.01s</span>
                    </label>
                    <input type="range" id="attack" class="slider" min="0" max="2" step="0.01" value="0.01">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Decay <span class="value-display" id="decay-value">0.2s</span>
                    </label>
                    <input type="range" id="decay" class="slider" min="0" max="2" step="0.01" value="0.2">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Sustain <span class="value-display" id="sustain-value">50%</span>
                    </label>
                    <input type="range" id="sustain" class="slider" min="0" max="1" step="0.01" value="0.5">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Release <span class="value-display" id="release-value">0.8s</span>
                    </label>
                    <input type="range" id="release" class="slider" min="0" max="5" step="0.01" value="0.8">
                </div>
            </section>

            <!-- Filter Section -->
            <section class="control-section filter-section">
                <h2 class="section-title">Filter</h2>
                <div class="filter-type-selector">
                    <button class="filter-type-button active" data-filter="lowpass">LP</button>
                    <button class="filter-type-button" data-filter="highpass">HP</button>
                    <button class="filter-type-button" data-filter="bandpass">BP</button>
                    <button class="filter-type-button" data-filter="notch">N</button>
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Cutoff <span class="value-display" id="filter-cutoff-value">2000Hz</span>
                    </label>
                    <input type="range" id="filter-cutoff" class="slider" min="20" max="20000" step="1" value="2000">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Resonance <span class="value-display" id="filter-resonance-value">1</span>
                    </label>
                    <input type="range" id="filter-resonance" class="slider" min="0.1" max="30" step="0.1" value="1">
                </div>
            </section>

            <!-- Master Section -->
            <section class="control-section master-section">
                <h2 class="section-title">Master</h2>
                <div class="control-group">
                    <label class="control-label">
                        Volume <span class="value-display" id="volume-value">70%</span>
                    </label>
                    <input type="range" id="volume" class="slider" min="0" max="100" step="1" value="70">
                </div>
            </section>

            <!-- Chorus Section -->
            <section class="control-section chorus-section">
                <h2 class="section-title">Chorus</h2>
                <div class="control-group">
                    <label class="control-label">
                        Frequency <span class="value-display" id="chorus-frequency-value">1.5Hz</span>
                    </label>
                    <input type="range" id="chorus-frequency" class="slider" min="0.1" max="10" step="0.1" value="1.5">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Depth <span class="value-display" id="chorus-depth-value">70%</span>
                    </label>
                    <input type="range" id="chorus-depth" class="slider" min="0" max="1" step="0.01" value="0.7">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Mix <span class="value-display" id="chorus-mix-value">0%</span>
                    </label>
                    <input type="range" id="chorus-mix" class="slider" min="0" max="1" step="0.01" value="0">
                </div>
            </section>

            <!-- Delay Section -->
            <section class="control-section delay-section">
                <h2 class="section-title">Delay</h2>
                <div class="control-group">
                    <label class="control-label">
                        Time <span class="value-display" id="delay-time-value">0.25s</span>
                    </label>
                    <input type="range" id="delay-time" class="slider" min="0" max="1" step="0.01" value="0.25">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Feedback <span class="value-display" id="delay-feedback-value">30%</span>
                    </label>
                    <input type="range" id="delay-feedback" class="slider" min="0" max="0.95" step="0.01" value="0.3">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Mix <span class="value-display" id="delay-mix-value">0%</span>
                    </label>
                    <input type="range" id="delay-mix" class="slider" min="0" max="1" step="0.01" value="0">
                </div>
            </section>

            <!-- Reverb Section -->
            <section class="control-section reverb-section">
                <h2 class="section-title">Reverb</h2>
                <div class="control-group">
                    <label class="control-label">
                        Size <span class="value-display" id="reverb-size-value">20%</span>
                    </label>
                    <input type="range" id="reverb-size" class="slider" min="0" max="1" step="0.01" value="0.2">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Dampening <span class="value-display" id="reverb-dampening-value">3000Hz</span>
                    </label>
                    <input type="range" id="reverb-dampening" class="slider" min="100" max="20000" step="100" value="3000">
                </div>
                <div class="control-group">
                    <label class="control-label">
                        Mix <span class="value-display" id="reverb-mix-value">0%</span>
                    </label>
                    <input type="range" id="reverb-mix" class="slider" min="0" max="1" step="0.01" value="0">
                </div>
            </section>
        </div>

        <!-- Virtual Keyboard -->
        <div class="keyboard-container">
            <div id="virtual-keyboard" class="virtual-keyboard"></div>
            <div class="keyboard-hints">
                <span class="hint">Use keyboard keys Z-M (lower octave) and Q-I (upper octave) to play</span>
            </div>
        </div>
    </div>
    
    <script type="module" src="/src/main.ts"></script>
</body>
</html>